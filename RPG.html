<html>

<head>
    <base href="https://tibiainspired.idlegame.com/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tibia Inspired Idle Adventure</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            height: 100%;
        }

        /* Styles for the initial landing page */
        #initial-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #1a1a1a;
            color: #e0e0e0;
        }

        /* Button styles such as margin, padding, and appearance */
        #initial-page button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #4a4a4a;
            color: #e0e0e0;
            border: none;
            cursor: pointer;
        }

        /* Change button background color on hover */
        #initial-page button:hover {
            background-color: #5a5a5a;
        }

        /* Styles for main game container */
        #game-container {
            display: flex;
            flex-direction: row;
            height: 100%;
        }

        /* Styles for the lateral menu, including its positioning and dimensions */
        #lateral-menu {
            position: fixed;
            right: 0;
            top: 60px;
            bottom: 0;
            width: 250px;
            height: calc(100% - 60px);
            background-color: #2a2a2a;
            border-left: 2px solid #4a4a4a;
            padding: 10px;
            transition: width 0.3s ease-in-out;
            overflow-y: auto;
            z-index: 1000;
        }

        /* Collapsed state for the lateral menu */
        #lateral-menu.collapsed {
            width: 60px;
        }

        /* Navigation inside the lateral menu */
        #lateral-menu nav {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 50px;
        }

        /* Styles for menu buttons within lateral menu */
        #lateral-menu button {
            display: flex;
            align-items: center;
            background: none;
            border: none;
            color: #e0e0e0;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            text-align: left;
        }

        /* Change background color of menu buttons on hover */
        #lateral-menu button:hover {
            background-color: #3a3a3a;
        }

        /* Styles for menu icons */
        .menu-icon {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }

        /* Hide menu text when menu is collapsed */
        #lateral-menu.collapsed .menu-text {
            display: none;
        }

        /* Toggle button for lateral menu */
        #toggle-menu {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #4a4a4a;
            color: #e0e0e0;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            z-index: 10;
        }

        /* Main content area */
        #main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        /* Header styles */
        header {
            background-color: #2a2a2a;
            padding: 10px;
            border-bottom: 2px solid #4a4a4a;
        }

        /* Character information section inside the header */
        #character-info {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: flex-start;
        }

        /* Paragraph spacing */
        #character-info p {
            margin: 0 10px 0 0;
        }

        /* Health and mana bar styles in header */
        .health-bar,
        .mana-bar {
            width: 150px;
            /* Increased size from 75px */
            height: 25px;
            /* Slightly increased height from 20px */
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-right: 10px;
        }

        /* Filled part of health and mana bars */
        .health-bar-fill,
        .mana-bar-fill {
            height: 100%;
            text-align: center;
            line-height: 25px;
            /* Adjusted line-height to match new bar height */
            color: white;
        }

        .health-bar-fill {
            background-color: #4CAF50;
        }

        .mana-bar-fill {
            background-color: #1E90FF;
        }

        /* Main in-game area */
        #game-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            padding: 10px;
            overflow-y: auto;
        }

        /* Action log area with scroll feature */
        #action-log {
            height: 150px;
            overflow-y: scroll;
            background-color: #2a2a2a;
            border: 1px solid #4a4a4a;
            padding: 10px;
            margin-bottom: 10px;
        }

        #content-area {
            flex-grow: 1;
            background-color: #2a2a2a;
            border: 1px solid #4a4a4a;
            padding: 10px;
        }

        #inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            padding: 10px;
            max-height: 50vh;
            overflow-y: auto;
        }

        .equipped-items {
            max-height: 200px;
            overflow-y: auto;
        }

        .progress-bar {
            width: 50%;
            margin: 10px 0;
            background-color: #ddd;
            border-radius: 5px;
        }

        .progress-bar-fill {
            height: 20px;
            background-color: #4CAF50;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
            text-align: center;
            color: white;
            line-height: 20px;
        }

        .mana-bar {
            background-color: #1E90FF;
        }

        #market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 20px;
        }

        .market-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .market-item img {
            width: 50px;
            height: 50px;
            margin-bottom: 10px;
        }

        @media (min-width: 768px) {
            #game-area {
                padding: 20px;
            }

            #action-log {
                height: 200px;
            }
        }

        @media (max-width: 768px) {
            #game-container {
                flex-direction: column;
            }

            #lateral-menu {
                width: 100%;
                border-left: none;
                border-bottom: 2px solid #4a4a4a;
            }

            #lateral-menu.collapsed {
                width: 100%;
                height: 40px;
            }

            #toggle-menu {
                top: 5px;
                left: 5px;
            }
        }

        .inventory-item {
            position: relative;
        }

        .item-count {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 5px;
            border-radius: 10px;
            font-size: 12px;
        }

        /* Character creation styles */
        #character-creation {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
        }

        #character-creation h2 {
            margin-bottom: 20px;
        }

        #character-creation label,
        #character-creation input,
        #character-creation select,
        #character-creation button {
            margin: 10px 0;
        }

        #bestiary-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .bestiary-entry {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border: 1px solid #4a4a4a;
            border-radius: 5px;
        }

        .bestiary-entry:hover {
            background-color: #3a3a3a;
        }

        #monster-details {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #4a4a4a;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <!-- criação de personagem -->
    <div id="initial-page">
        <h1>Welcome to Thoia Idle Adventure</h1>
        <button onclick="createCharacter()">Create Character</button>
        <button onclick="loadGame()">Load</button>
    </div>
    <div id="character-creation" style="display: none;">
        <h2>Create Your Character</h2>
        <label for="char-name">Name:</label>
        <input type="text" id="char-name" required>

        <label for="char-class">Class:</label>
        <select id="char-class">
            <option value="Warrior">Warrior</option>
            <option value="Mage">Mage</option>
            <option value="Archer">Archer</option>
            <option value="Bard">Bard</option>
            <option value="Rogue">Rogue</option>
            <option value="Paladin">Paladin</option>
            <option value="Barbarian">Barbarian</option>
            <option value="Cleric">Cleric</option>
            <option value="Priest">Priest</option>
            <option value="Sorcerer">Sorcerer</option>
            <option value="Warlock">Warlock</option>
            <option value="Druid">Druid</option>
            <option value="Shooter">Shooter</option>
        </select>

        <button onclick="finalizeCharacter()">Create Character</button>
    </div>

    <div id="game-content" style="display: none;">
        <div id="game-container">
            <div id="lateral-menu">
                <button id="toggle-menu"><strong>&gt;</strong></button>
                <nav>
                    <button onclick="showInventory()">
                        <svg class="menu-icon">
                            <use href="#backpack" />
                        </svg>
                        <span class="menu-text">Inventory</span>
                    </button>
                    <button onclick="showCharacter()">
                        <svg class="menu-icon">
                            <use href="#person" />
                        </svg>
                        <span class="menu-text">Character</span>
                    </button>
                    <button onclick="showHunt()">
                        <svg class="menu-icon">
                            <use href="#sword-shield" />
                        </svg>
                        <span class="menu-text">Hunt</span>
                    </button>
                    <button onclick="showQuests()">
                        <svg class="menu-icon">
                            <use href="#scroll" />
                        </svg>
                        <span class="menu-text">Quests</span>
                    </button>
                    <button onclick="showGuild()">
                        <svg class="menu-icon">
                            <use href="#shield" />
                        </svg>
                        <span class="menu-text">Guild</span>
                    </button>
                    <button onclick="showMarket()">
                        <svg class="menu-icon">
                            <use href="#shop" />
                        </svg>
                        <span class="menu-text">Market</span>
                    </button>
                    <button onclick="showTavern()">
                        <svg class="menu-icon">
                            <use href="#tavern" />
                        </svg>
                        <span class="menu-text">Tavern</span>
                    </button>
                    <button onclick="showSpells()">
                        <svg class="menu-icon">
                            <use href="#magic-wand" />
                        </svg>
                        <span class="menu-text">Spells</span>
                    </button>
                    <button onclick="showMagicStore()">
                        <svg class="menu-icon">
                            <use href="#skills" />
                        </svg>
                        <span class="menu-text">Magic Store</span>
                    </button>
                    <button onclick="showBestiary()">
                        <svg class="menu-icon">
                            <use href="#book" />
                        </svg>
                        <span class="menu-text">Bestiary</span>
                    </button>
                </nav>
            </div>
            <div id="main-content">
                <header>
                    <div id="character-info">
                        <p>Name: ${character.name}</p>
                        <p>Class: ${character.class}</p>
                        <p>Level: ${character.level}</p>
                        <p>Exp: ${character.exp}/${expToNextLevel}</p>
                        <div class="health-bar">
                            <div class="health-bar-fill"
                                style="width: ${(character.health / character.maxHealth) * 100}%">
                                HP: ${character.health}/${character.maxHealth}
                            </div>
                        </div>
                        <div class="mana-bar">
                            <div class="mana-bar-fill" style="width: ${(character.mana / character.maxMana) * 100}%">
                                MP: ${character.mana}/${character.maxMana}
                            </div>
                        </div>
                    </div>
                </header>
                <div id="game-area">
                    <div id="action-log"></div>
                    <div id="content-area"></div>
                </div>
            </div>
        </div>
        <script>

            const character = {
                name: "",
                class: "Warrior",
                level: 1,
                exp: 0,
                gold: 10000,
                health: 100,
                maxHealth: 100,
                mana: 100,
                maxMana: 100,
                skills: {
                    sword: { level: 1, exp: 0, maxExp: 10 },
                    magic: { level: 1, exp: 0, maxExp: 10 },
                    shield: { level: 1, exp: 0, maxExp: 10 },
                    axe: { level: 1, exp: 0, maxExp: 10 },
                    hammer: { level: 1, exp: 0, maxExp: 10 },
                    distanceFight: { level: 1, exp: 0, maxExp: 10 },
                    fistHand: { level: 1, exp: 0, maxExp: 10 },
                    spells: []
                },
                inventory: [],
                equipped: [],
                bestiary: {}
            };

            // Monsters available for hunting
            const monsters = [
                { name: "Rat", exp: 5, gold: 2, health: 10 },
                { name: "Goblin", exp: 10, gold: 5, health: 15 },
                { name: "Orc", exp: 20, gold: 10, health: 20 },
                { name: "Dragon", exp: 100, gold: 50, health: 25 }
            ];

            // Items available in the market
            const marketItems = [
                { name: "Sword", price: 100, image: "#sword", type: "weapon" },
                { name: "Shield", price: 80, image: "#shield", type: "shield" },
                { name: "Health Potion", price: 20, image: "#health_potion", type: "potion" }
            ];

            // Spells available in the magic store
            let spells = [
                { name: "Fireball", price: 50, description: "Deals fire damage.", acquired: false },
                { name: "Ice Shard", price: 50, description: "Deals ice damage.", acquired: false }
            ];

            // Function to log actions in the game
            function logAction(message) {
                const log = document.getElementById("action-log");
                const currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                log.innerHTML += `<p>${currentTime} ${message}</p>`;
                log.scrollTop = log.scrollHeight;
            }

            // Update the lateral menu with character information
            function updateLateralMenu() {
                const characterInfo = document.getElementById("character-info");
                const expToNextLevel = character.level * 100;
                characterInfo.innerHTML = `
            <p>Name: ${character.name}</p>
            <p>Class: ${character.class}</p>
            <p>Level: ${character.level}</p>
            <p>Exp: ${character.exp}/${expToNextLevel}</p>
            <div class="health-bar">
                <div class="health-bar-fill" style="width: ${(character.health / character.maxHealth) * 100}%">
                    HP: ${character.health}/${character.maxHealth}
                </div>
            </div>
            <div class="mana-bar">
                <div class="mana-bar-fill" style="width: ${(character.mana / character.maxMana) * 100}%">
                    MP: ${character.mana}/${character.maxMana}
                </div>
            </div>
        `;
            }

            // Initialize character creation screen
            function createCharacter() {
                document.getElementById('initial-page').style.display = 'none';
                document.getElementById('character-creation').style.display = 'block';
            }

            // Finalize character setup and load game
            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function finalizeCharacter() {
                const name = document.getElementById('char-name').value;
                const characterClass = document.getElementById('char-class').value;

                if (!name) {
                    alert('Please enter a name for your character.');
                    return;
                }

                character.name = name;
                character.class = characterClass;

                function randomHealth(min, max) {
                    return Math.floor(Math.random() * (max - min + 1)) + min;
                }

                switch (characterClass) {
                    case 'Warrior':
                        character.maxHealth = 12;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Sword", description: "A sharp sword", image: "#sword", type: "weapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Sword", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Armor", description: "Protective armor", image: "#armor", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 5, usableClasses: "Todas" },
                            { name: "Shield", description: "A sturdy shield", image: "#shield", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 3, usableClasses: "Todas" },
                            { name: "Helmet", description: "A strong helmet", image: "#helmet", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 2, usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 3, usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 2, usableClasses: "Todas" },
                        ];
                        break;

                    case 'Mage':
                        character.maxHealth = 7;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Staff", description: "A magical staff", image: "#staff", type: "magicTwoHandedWeapon", price: 0, sellPrice: 10, damageType: "Distance", skill: "Magic", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Grimoire", description: "A book of spells", image: "#grimoire", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Robe", description: "A mage's robe", image: "#robe", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Hat", description: "A wizard's hat", image: "#hat", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Archer':
                        character.maxHealth = 9;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Short Bow", description: "A powerful bow", image: "#bow", type: "weaponDistanceTwoHands", price: 0, sellPrice: 10, damageType: "Distance", skill: "distanceFight", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "5%", usableClasses: "Todas" },
                            { name: "Armor", description: "Light armor", image: "#armor", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Helmet", description: "A light helmet", image: "#helmet", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Bard':
                        character.maxHealth = 9;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Rapier", description: "A light sword", image: "#rapier", type: "weapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Sword", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Armor", description: "Stylish armor", image: "#armor", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Helmet", description: "A bard's hat", image: "#helmet", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Comfortable boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Lute", description: "A musical instrument", image: "#lute", type: "instrument", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Rogue':
                        character.maxHealth = 9;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Dagger", description: "A sharp dagger", image: "#dagger", type: "weapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Sword", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Shield", description: "A lightweight shield", image: "#shield", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Armor", description: "Leather armor", image: "#armor", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Helmet", description: "A light helmet", image: "#helmet", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Light boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Paladin':
                        character.maxHealth = 10;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Sword", description: "A strong sword", image: "#sword", type: "weapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Sword", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Shield", description: "A sturdy shield", image: "#shield", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Armor", description: "Heavy armor", image: "#armor", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Helmet", description: "A strong helmet", image: "#helmet", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Heavy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Barbarian':
                        character.maxHealth = 12;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Axe", description: "A large axe", image: "#axe", type: "weapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Axe", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "5%", usableClasses: "Todas" },
                            { name: "Armor", description: "Rugged armor", image: "#armor", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Helmet", description: "A barbarian helmet", image: "#helmet", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Heavy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Cleric':
                        character.maxHealth = 9;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Mace", description: "A heavy mace", image: "#mace", type: "weapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Hammer", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Shield", description: "A sturdy shield", image: "#shield", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Armor", description: "Holy armor", image: "#armor", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Helmet", description: "A cleric's helmet", image: "#helmet", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Comfortable boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Sorcerer':
                        character.maxHealth = 6;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Staff", description: "A powerful staff", image: "#staff", type: "magicTwoHandedWeapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Magic", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Grimoire", description: "A book of spells", image: "#grimoire", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 5, usableClasses: "Todas" },
                            { name: "Robe", description: "A mage's robe", image: "#robe", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Hat", description: "A sorcerer's hat", image: "#hat", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Priest':
                        character.maxHealth = 8;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Wand", description: "A powerful Wand", image: "#Wand", type: "magicWeapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Magic", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Orb", description: "A Orb", image: "#Orb", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 5, usableClasses: "Todas" },
                            { name: "Robe", description: "A mage's robe", image: "#robe", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Hat", description: "A sorcerer's hat", image: "#hat", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Witch':
                        character.maxHealth = 8;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Wand", description: "A powerful Wand", image: "#Wand", type: "magicWeapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Magic", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Orb", description: "A Orb", image: "#Orb", type: "shield", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", defense: 5, usableClasses: "Todas" },
                            { name: "Robe", description: "A mage's robe", image: "#robe", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Hat", description: "A sorcerer's hat", image: "#hat", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'Druid':
                        character.maxHealth = 9;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Staff", description: "A powerful staff", image: "#staff", type: "magicTwoHandedWeapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Magic", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Robe", description: "A mage's robe", image: "#robe", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Hat", description: "A sorcerer's hat", image: "#hat", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    case 'shooter':
                        character.maxHealth = 7;
                        character.maxMana = 20;
                        character.inventory = [
                            { name: "Staff", description: "A powerful staff", image: "#staff", type: "distanceWeapon", price: 0, sellPrice: 10, damageType: "melee", skill: "Magic", weaponLevel: 1, minAttack: "2", maxAttack: "5", criticalChance: "3%", usableClasses: "Todas" },
                            { name: "Robe", description: "A mage's robe", image: "#robe", type: "armor", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Hat", description: "A sorcerer's hat", image: "#hat", type: "helmet", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Legs", description: "Leg protection", image: "#legs", type: "legs", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" },
                            { name: "Boots", description: "Sturdy boots", image: "#boots", type: "boots", price: 0, sellPrice: 10, damageType: "none", skill: "none", weaponLevel: 0, attackPower: "0", criticalChance: "0%", usableClasses: "Todas" }
                        ];
                        break;

                    default:
                        throw new Error("Classe de personagem inválida.");
                }


                character.health = character.maxHealth;
                character.mana = character.maxMana;
                character.skills = {
                    sword: { level: 1, exp: 0, maxExp: 10 },
                    magic: { level: 1, exp: 0, maxExp: 10 },
                    shield: { level: 1, exp: 0, maxExp: 10 },
                    axe: { level: 1, exp: 0, maxExp: 10 },
                    hammer: { level: 1, exp: 0, maxExp: 10 },
                    distanceFight: { level: 1, exp: 0, maxExp: 10 },
                    fistHand: { level: 1, exp: 0, maxExp: 10 },
                    spells: []
                };

                document.getElementById('character-creation').style.display = 'none';
                loadGame();
            }

            // Load the game after character creation
            function loadGame() {
                document.getElementById('game-content').style.display = 'block';
                initializeGame();
            }

            // Initialize game settings and display default states
            function initializeGame() {
                logAction("Welcome to Tibia Inspired Idle Adventure! Use the menu to navigate through different game areas.");
                updateLateralMenu();
                showInventory();
            }

            // Show inventory of the character
            function showInventory() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = `
            <h2>Inventory</h2>
            <p>Gold: ${character.gold}</p>
            <div id='inventory-grid'></div>
            <br>
            <h3>Equipped Items</h3>
            <div id='equipped-items'></div>
        `;
                const inventoryGrid = document.getElementById("inventory-grid");

                const groupedInventory = character.inventory.reduce((acc, item) => {
                    if (!acc[item.name]) {
                        acc[item.name] = { ...item, count: 1 };
                    } else {
                        acc[item.name].count++;
                    }
                    return acc;
                }, {});

                Object.values(groupedInventory).forEach(item => {
                    const itemElement = document.createElement("div");
                    itemElement.className = "inventory-item";
                    itemElement.innerHTML = `
                <img src="${item.image}" alt="${item.name}" width="50" height="50">
                <div class="item-tooltip">${item.name}<br>${item.description}</div>
                <div class="item-actions"></div>
                ${item.count > 1 ? `<div class="item-count">${item.count}</div>` : ''}
            `;
                    itemElement.addEventListener("contextmenu", (event) => handleItemClick(event, item));
                    itemElement.addEventListener("mouseover", function () {
                        this.querySelector(".item-tooltip").style.opacity = "1";
                    });
                    itemElement.addEventListener("mouseout", function () {
                        this.querySelector(".item-tooltip").style.opacity = "0";
                    });
                    inventoryGrid.appendChild(itemElement);
                });

                updateEquippedItems();

                logAction("You opened your inventory.");
                updateLateralMenu();
            }

            // Function to update equipped items display
            function updateEquippedItems() {
                const equippedItems = document.getElementById('equipped-items');
                equippedItems.innerHTML = '';
                character.equipped.forEach(item => {
                    const itemElement = document.createElement("div");
                    itemElement.className = "inventory-item";
                    itemElement.innerHTML = `
                <img src="${item.image}" alt="${item.name}" width="50" height="50">
                <div class="item-tooltip">${item.name}<br>${item.description}</div>
                <div class="item-actions"></div>
            `;
                    itemElement.addEventListener("contextmenu", (event) => handleItemClick(event, item, true));
                    itemElement.addEventListener("mouseover", function () {
                        this.querySelector(".item-tooltip").style.opacity = "1";
                    });
                    itemElement.addEventListener("mouseout", function () {
                        this.querySelector(".item-tooltip").style.opacity = "0";
                    });
                    equippedItems.appendChild(itemElement);
                });
            }

            // Handle item interactions such as equip and use
            function handleItemClick(event, item, isEquipped = false) {
                event.preventDefault();
                const actionsDiv = event.currentTarget.querySelector(".item-actions");
                actionsDiv.innerHTML = '';
                actionsDiv.style.display = 'block';

                if (isEquipped) {
                    actionsDiv.innerHTML += `<button onclick="unequipItem('${item.name}')">Unequip</button>`;
                } else {
                    switch (item.type) {
                        case 'weapon':
                        case 'distanceweapon':
                        case 'twohandedweapon':
                        case 'twohandeddistanceweapon':
                        case 'magicWeapon':
                        case 'magicTwoHandedWeapon':
                        case 'armor':
                        case 'helmet':
                        case 'legs':
                        case 'boots':
                        case 'armor':
                        case 'magicHelmet':
                        case 'shield':
                            actionsDiv.innerHTML += `<button onclick="equipItem('${item.name}')">Equip</button>`;
                            actionsDiv.innerHTML += `<button onclick="discardItem('${item.name}')">Discard</button>`;
                            break;
                        case 'potion':
                            actionsDiv.innerHTML += `<button onclick="usePotion('${item.name}')">Use</button>`;
                            actionsDiv.innerHTML += `<button onclick="discardItem('${item.name}')">Discard</button>`;
                            break;
                    }
                }

                document.addEventListener('click', function closeActions(e) {
                    if (!actionsDiv.contains(e.target)) {
                        actionsDiv.style.display = 'none';
                        document.removeEventListener('click', closeActions);
                    }
                });
            }

            // Function to equip an item from the inventory
            function equipItem(itemName) {
                const index = character.inventory.findIndex(invItem => invItem.name === itemName);
                if (index !== -1) {
                    const item = character.inventory[index];
                    let canEquip = true;

                    // Verificações para garantir que o item possa ser equipado
                    if (item.type === 'weapon' && character.equipped.filter(i => i.type === 'weapon').length >= 2) {
                        canEquip = false;
                    } else if (item.type === 'twohandedweapon' && (character.equipped.some(i => i.type === 'weapon') || character.equipped.some(i => i.type === 'shield'))) {
                        canEquip = false;
                    } else if (item.type === 'shield' && (character.equipped.some(i => i.type === 'twohandedweapon') || character.equipped.filter(i => i.type === 'weapon').length >= 2)) {
                        canEquip = false;
                    } else if (['armor', 'helmet', 'legs', 'boots', 'magicHelmet', 'armor'].includes(item.type) && character.equipped.some(i => i.type === item.type)) {
                        canEquip = false;
                    } else if (item.type === 'armaDistanceDuasMaos' && (character.equipped.some(i => i.type === 'weapon') || character.equipped.some(i => i.type === 'shield'))) {
                        canEquip = false;
                    } else if (item.type === 'armaDistance' && character.equipped.filter(i => i.type === 'armaDistance').length >= 2) {
                        canEquip = false;
                    } else if (item.type === 'magicArmaDuasMaos' && (character.equipped.some(i => i.type === 'weapon') || character.equipped.some(i => i.type === 'shield'))) {
                        canEquip = false;
                    } else if (item.type === 'magicArma' && character.equipped.filter(i => i.type === 'magicArma').length >= 2) {
                        canEquip = false;
                    }

                    if (canEquip) {
                        // Move o item do inventário para os itens equipados
                        const equippedItem = character.inventory.splice(index, 1)[0];
                        character.equipped.push(equippedItem);
                        logAction(`You equipped ${item.name}.`);
                        showInventory(); // Atualiza o inventário na UI
                    } else {
                        logAction(`You can't equip ${item.name} right now.`);
                    }
                }
            }


            // Function to unequip an item
            function unequipItem(itemName) {
                const index = character.equipped.findIndex(equippedItem => equippedItem.name === itemName);
                if (index !== -1) {
                    // Move o item de volta para o inventário
                    const unequippedItem = character.equipped.splice(index, 1)[0];
                    character.inventory.push(unequippedItem);
                    logAction(`You unequipped ${itemName}.`);
                    showInventory(); // Atualiza o inventário na UI
                }
            }


            // Function to discard an item from inventory
            function discardItem(itemName) {
                const index = character.inventory.findIndex(invItem => invItem.name === itemName);
                if (index !== -1) {
                    character.inventory.splice(index, 1);
                    logAction(`You discarded ${itemName}.`);
                    showInventory();
                }
            }

            // Function to use a health potion
            function usePotion(itemName) {
                const item = character.inventory.find(invItem => invItem.name === itemName);
                if (item.name === 'Health Potion') {
                    const healAmount = Math.floor(Math.random() * 7) + 2;
                    character.health = Math.min(character.health + healAmount, character.maxHealth);
                    const index = character.inventory.findIndex(invItem => invItem.name === item.name);
                    if (index !== -1) {
                        character.inventory.splice(index, 1);
                    }
                    logAction(`You used a Health Potion and restored ${healAmount} HP.`);
                    showInventory();
                    updateLateralMenu();
                }
            }

            // Function to show character information
            function showCharacter() {
                const contentArea = document.getElementById("content-area");
                const expToNextLevel = character.level * 100;
                contentArea.innerHTML = `
            <h2>Character Information</h2>
            <img src="#person" alt="Character Image" width="100" height="100">
            <p>Name: ${character.name}</p>
            <p>Class: ${character.class}</p>
            <p>Level: ${character.level}</p>
            <p>Experience: ${character.exp}/${expToNextLevel}</p>
            <div style="width: 50%;">
                <h3>Health</h3>
                <div class="progress-bar">
                    <div class="progress-bar-fill" style="width: ${(character.health / character.maxHealth) * 100}%">
                        ${character.health}/${character.maxHealth}
                    </div>
                </div>
            </div>
            <div style="width: 50%;">
                <h3>Mana</h3>
                <div class="progress-bar">
                    <div class="progress-bar-fill mana-bar" style="width: ${(character.mana / character.maxMana) * 100}%">
                        ${character.mana}/${character.maxMana}
                    </div>
                </div>
            </div>
            <div style="clear: both;"></div>
            <h3>Skills</h3>
        `;

                const skills = ['sword', 'magic', 'shield', 'axe', 'hammer', 'distanceFight', 'fistHand'];
                skills.forEach(skill => {
                    const skillData = character.skills[skill];
                    const skillLevel = skillData.level;
                    const skillExp = skillData.exp;
                    const skillMaxExp = skillData.maxExp;

                    contentArea.innerHTML += `
                <h4>${skill.charAt(0).toUpperCase() + skill.slice(1)}: ${skillLevel}</h4>
                <div class="progress-bar">
                    <div class="progress-bar-fill" style="width: ${(skillExp / skillMaxExp) * 100}; background-color: gray;">
                        ${skillExp}/${skillMaxExp}
                    </div>
                </div>
            `;
                });

                logAction("You checked your character information.");
                updateLateralMenu();
            }

            // Function to show hunting interface
            function showHunt() {
                const contentArea = document.getElementById("content-area");
                const healthPotions = character.inventory.filter(item => item.name === "Health Potion").length;
                contentArea.innerHTML = `
            <h2>Hunt Monsters</h2>
            <p>Quantidade de Health Potions: <span id="health-potion-count">${healthPotions}</span></p>
            <div id='monster-list'></div>
            <br>
            <div id='hunt-controls'></div>
            <div id='monster-image'></div>
        `;
                const monsterList = document.getElementById("monster-list");

                monsters.forEach(monster => {
                    monsterList.innerHTML += `<button onclick="selectMonster('${monster.name}')" ${character.health <= 0 ? 'disabled' : ''}>${monster.name} (Exp: ${monster.exp}, Gold: ${monster.gold})</button>`;
                });
            }

            // Function to select a monster to hunt
            function selectMonster(monsterName) {
                huntingMonster = monsters.find(m => m.name === monsterName);
                const huntControls = document.getElementById("hunt-controls");
                huntControls.innerHTML = `
            <button onclick="startHunt()">Start Hunt</button>
            <button onclick="endHunt()" disabled>End Hunt</button>
            <div id="hunt-timer">00:00:00</div>
        `;

                const monsterImage = document.getElementById("monster-image");
                monsterImage.innerHTML = `<img src="#${monsterName.toLowerCase()}" alt="${monsterName}" width="100" height="100">`;
            }

            // Start the hunting process
            function startHunt() {
                if (!huntingMonster || character.health <= 0) return;

                document.querySelector('#hunt-controls button:nth-child(1)').disabled = true;
                document.querySelector('#hunt-controls button:nth-child(2)').disabled = false;
                document.getElementById('monster-list').style.display = 'none';
                document.getElementById('lateral-menu').style.display = 'none';

                let seconds = 0;
                let monsterHealth = huntingMonster.health;
                let isPlayerTurn = true;

                huntingTimer = setInterval(() => {
                    seconds++;
                    const hours = Math.floor(seconds / 3600);
                    const minutes = Math.floor((seconds % 3600) / 60);
                    const remainingSeconds = seconds % 60;
                    document.getElementById("hunt-timer").textContent =
                        `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;

                    if (isPlayerTurn) {
                        const playerDamage = calculateDamage();
                        monsterHealth -= playerDamage;
                        if (playerDamage > 0) {
                            console.log(character);
                            console.log(character.equipped);

                            // Obter o item equipado e verificar se ele tem uma habilidade associada
                            const equippedItem = character?.equipped[0]; // Supondo que o primeiro item é a arma
                            const skillName = equippedItem?.skill?.toLowerCase(); // Pega a habilidade associada ao item equipado

                            if (skillName && character.skills[skillName]) {
                                // Aumenta a experiência da habilidade correspondente
                                character.skills[skillName].exp += 1;

                                // Verifica se a experiência atingiu o máximo
                                if (character.skills[skillName].exp >= character.skills[skillName].maxExp) {
                                    character.skills[skillName].level += 1;
                                    character.skills[skillName].exp = 0;
                                    character.skills[skillName].maxExp = character.skills[skillName].level * 10;
                                    logAction(`Your ${equippedItem.name} skill has increased to level ${character.skills[skillName].level}!`);
                                }
                            }
                        }

                        logAction(`${character.name} [${character.level}]: Dealt ${playerDamage} damage to ${huntingMonster.name}.`);

                        if (monsterHealth <= 0) {
                            character.exp += huntingMonster.exp;
                            character.gold += huntingMonster.gold;
                            logAction(`You defeated ${huntingMonster.name}! Gained ${huntingMonster.exp} exp and ${huntingMonster.gold} gold.`);

                            if (!character.bestiary[huntingMonster.name]) {
                                character.bestiary[huntingMonster.name] = {
                                    ...huntingMonster,
                                    kills: 1,
                                    image: `#${huntingMonster.name.toLowerCase()}`
                                };
                            } else {
                                character.bestiary[huntingMonster.name].kills++;
                            }

                            checkLevelUp();
                            updateLateralMenu();
                            monsterHealth = huntingMonster.health;
                        }
                    } else {
                        const monsterDamage = Math.floor(Math.random() * 3);
                        character.health -= monsterDamage;
                        logAction(`${huntingMonster.name}: caused damage ${monsterDamage}.`);

                        if (character.health <= character.maxHealth * 0.5) {
                            const healthPotions = character.inventory.filter(item => item.name === "Health Potion").length;
                            if (healthPotions > 0) {
                                const healAmount = Math.floor(Math.random() * 7) + 4;
                                character.health = Math.min(character.health + healAmount, character.maxHealth);
                                character.inventory = character.inventory.filter((item, index) =>
                                    item.name !== "Health Potion" || index !== character.inventory.findIndex(i => i.name === "Health Potion")
                                );
                                logAction(`Used a Health Potion. Healed ${healAmount} HP.`);
                                document.getElementById("health-potion-count").textContent = character.inventory.filter(item => item.name === "Health Potion").length;
                            }
                        }

                        updateLateralMenu();

                        if (character.health <= 0) {
                            endHunt();
                            logAction("You have been defeated!");
                            document.querySelector('#hunt-controls button:nth-child(1)').disabled = true;
                        }
                    }

                    isPlayerTurn = !isPlayerTurn;
                }, 1000);
            }

            // Função para calcular o dano total
            function calculateDamage() {
                let totalDamage = 0;

                character.equipped.forEach(item => {
                    // Verifica se o item é uma arma (incluir diferentes tipos de arma)
                    const weaponTypes = [
                        "weapon",
                        "magicTwoHandedWeapon",
                        "twohandedweapon",
                        "weaponDistanceTwoHands",
                        "magicWeapon",
                        "distanceWeapon"
                    ];

                    if (weaponTypes.includes(item.type)) {

                        // Converte os valores de ataque mínimo e máximo para inteiros
                        const minDamage = parseInt(item.minAttack) || 0;
                        const maxDamage = parseInt(item.maxAttack) || 0;

                        // Verifica se ambos os valores são válidos
                        if (isNaN(minDamage) || isNaN(maxDamage) || minDamage === 0 || maxDamage === 0) {
                            logAction(`Erro: minAttack ou maxAttack inválidos no item: ${item.name}`);
                            return;
                        }

                        // Gera dano aleatório entre minDamage e maxDamage
                        const randomDamage = Math.floor(Math.random() * (maxDamage - minDamage + 1)) + minDamage;

                        // Obtém o nível da skill correspondente ao item e garante que seja um inteiro
                        const skillName = item.skill?.toLowerCase(); // Pega a habilidade associada ao item
                        const skillLevel = parseInt(character.skills[skillName]?.level) || 1; // Nível da skill ou 1 se não existir ou for inválido

                        // Garante que o level do personagem seja um número inteiro
                        const characterLevel = parseInt(character.level) || 1; // Nível do personagem ou 1 se for inválido

                        // Cálculo do bônus de dano baseado no nível do personagem
                        const levelBonus = Math.floor(characterLevel / 5); // +1 de dano a cada 5 níveis

                        // Cálculo de dano total
                        totalDamage += randomDamage + skillLevel + levelBonus;
                    }
                });

                logAction("Dano total calculado:", totalDamage);
                return totalDamage;
            }


            // End the hunt and reset relevant variables
            function endHunt() {
                clearInterval(huntingTimer);
                document.querySelector('#hunt-controls button:nth-child(1)').disabled = false;
                document.querySelector('#hunt-controls button:nth-child(2)').disabled = true;
                document.getElementById('monster-list').style.display = 'block';
                document.getElementById('lateral-menu').style.display = 'block';
                logAction(`You finished hunting ${huntingMonster.name}.`);
                huntingMonster = null;
                updateLateralMenu();

                if (character.health <= 0) {
                    const huntButtons = document.querySelectorAll('#monster-list button');
                    huntButtons.forEach(button => button.disabled = true);
                }
            }

            // Function to show quest information
            function showQuests() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = "<h2>Quests</h2>";
                character.quests.forEach(quest => {
                    if (quest.completed) {
                        contentArea.innerHTML += `<p>${quest.name} - Completed</p>`;
                    } else if (quest.progress !== undefined) {
                        contentArea.innerHTML += `<p>${quest.name} - Progress: ${quest.progress}/${quest.total}</p>`;
                    } else {
                        contentArea.innerHTML += `<p>${quest.name} - ${quest.description}</p>`;
                    }
                });
                logAction("You checked your quest log.");
            }

            // Function to show guild information
            function showGuild() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = `
            <h2>Guild</h2>
            <p>You are not currently in a guild.</p>
            <button onclick="createGuild()">Create Guild</button>
            <button onclick="joinGuild()">Join Guild</button>
        `;
                logAction("You accessed the guild menu.");
                updateLateralMenu();
            }

            // Placeholder functions for guild creation and joining
            function createGuild() {
                logAction("Guild creation is not implemented yet.");
            }

            function joinGuild() {
                logAction("Guild joining is not implemented yet.");
            }

            // Function to show market interface
            function showMarket() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = `<h2>Market</h2><p>Gold: ${character.gold}</p><div id='market-grid'></div>`;
                const marketGrid = document.getElementById("market-grid");

                marketItems.forEach(item => {
                    const itemElement = document.createElement("div");
                    itemElement.className = "market-item";
                    itemElement.innerHTML = `
                <img src="${item.image}" alt="${item.name}">
                <div class="item-tooltip">${item.name}<br>Price: ${item.price} gold</div>
                <button onclick="buyItem('${item.name}')">Buy</button>
            `;
                    marketGrid.appendChild(itemElement);
                });

                logAction("You entered the market.");
                updateLateralMenu();
            }

            // Function to handle buying of market items
            function buyItem(itemName) {
                const item = marketItems.find(i => i.name === itemName);
                if (character.gold >= item.price) {
                    character.gold -= item.price;
                    character.inventory.push({ name: item.name, description: "A newly bought item", image: item.image, type: item.type });
                    logAction(`You bought ${item.name} for ${item.price} gold.`);
                    showInventory();
                } else {
                    logAction("You don't have enough gold to buy this item.");
                }
                updateLateralMenu();
            }

            // Function to check for level up
            function checkLevelUp() {
                const expNeeded = character.level * 100;
                if (character.exp >= expNeeded) {
                    character.level += 1;
                    character.exp -= expNeeded;

                    let healthIncrease;
                    switch (character.class) {
                        case 'Warrior':
                            healthIncrease = Math.floor(Math.random() * 8) + 3; // aleatório entre 3 e 10
                            break;
                        case 'Mage':
                            healthIncrease = Math.floor(Math.random() * 6) + 1; // aleatório entre 1 e 6
                            break;
                        case 'Archer':
                            healthIncrease = Math.floor(Math.random() * 7) + 2; // aleatório entre 2 e 8
                            break;
                        case 'Bard':
                            healthIncrease = Math.floor(Math.random() * 7) + 2; // aleatório entre 2 e 8
                            break;
                        case 'Rogue':
                            healthIncrease = Math.floor(Math.random() * 7) + 2; // aleatório entre 2 e 8
                            break;
                        case 'Paladin':
                            healthIncrease = Math.floor(Math.random() * 8) + 3; // aleatório entre 3 e 10
                            break;
                        case 'Barbarian':
                            healthIncrease = Math.floor(Math.random() * 10) + 3; // aleatório entre 3 e 12
                            break;
                        case 'Cleric':
                            healthIncrease = Math.floor(Math.random() * 7) + 2; // aleatório entre 2 e 8
                            break;
                        case 'Priest':
                            healthIncrease = Math.floor(Math.random() * 7) + 2; // aleatório entre 2 e 8
                            break;
                        case 'Sorcerer':
                            healthIncrease = Math.floor(Math.random() * 6) + 1; // aleatório entre 1 e 6
                            break;
                        case 'Warlock':
                            healthIncrease = Math.floor(Math.random() * 7) + 2; // aleatório entre 2 e 8
                            break;
                        case 'Druid':
                            healthIncrease = Math.floor(Math.random() * 7) + 2; // aleatório entre 2 e 8
                            break;
                        case 'Gunner':
                            healthIncrease = Math.floor(Math.random() * 6) + 1; // aleatório entre 1 e 6
                            break;
                    }

                    character.maxHealth += healthIncrease;
                    character.health = character.maxHealth;

                    character.maxMana += 20;
                    character.mana = character.maxMana;

                    logAction(`Congratulations! You've reached level ${character.level}! Your max health increased by ${healthIncrease}.`);
                    updateLateralMenu();
                }
            }


            // Function to show tavern interface
            function showTavern() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = `
            <h2>Tavern</h2>
            <button onclick="sleepInTavern()">Sleep in Tavern</button>
            <br><br>
            <div id="sleep-timer"></div>
        `;
                logAction("You entered the tavern.");
            }

            // Function to manage sleeping in tavern for health restoration
            function sleepInTavern() {
                logAction("You're resting in the tavern...");
                const sleepTimer = document.getElementById("sleep-timer");
                let secondsLeft = 2;

                const timerInterval = setInterval(() => {
                    sleepTimer.textContent = `Resting: ${secondsLeft} seconds left`;
                    secondsLeft--;

                    if (secondsLeft < 0) {
                        clearInterval(timerInterval);
                        character.health = character.maxHealth;
                        logAction("You've fully recovered your health!");
                        updateLateralMenu();
                        sleepTimer.textContent = "";
                    }
                }, 1000);
            }

            // Function to show bestiary interface
            function showBestiary() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = `
            <h2>Bestiário</h2>
            <div id="bestiary-list"></div>
            <div id="monster-details"></div>
        `;
                updateBestiaryList();
                logAction("You opened the Bestiary.");
            }

            // Function to update the bestiary list
            function updateBestiaryList() {
                const bestiaryList = document.getElementById("bestiary-list");
                bestiaryList.innerHTML = "";
                Object.keys(character.bestiary).forEach(monsterName => {
                    const monster = character.bestiary[monsterName];
                    bestiaryList.innerHTML += `
                <div class="bestiary-entry" onclick="showMonsterDetails('${monsterName}')">
                    <img src="${monster.image}" alt="${monsterName}" width="50" height="50">
                    <span>${monsterName}</span>
                </div>
            `;
                });
            }

            // Function to display selected monster details
            function showMonsterDetails(monsterName) {
                const monsterDetails = document.getElementById("monster-details");
                const monster = character.bestiary[monsterName];
                monsterDetails.innerHTML = `
            <h3>${monsterName}</h3>
            <img src="${monster.image}" alt="${monsterName}" width="100" height="100">
            <p>Experience: ${monster.exp}</p>
            <p>Gold: ${monster.gold}</p>
            <p>Health: ${monster.health}</p>
            <p>Kills: ${monster.kills}</p>
        `;
            }

            // Function to display magic store interface
            function showMagicStore() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = `
            <h2>Magic Store</h2>
            <div id='magic-store-list'></div>
        `;

                const magicStoreList = document.getElementById("magic-store-list");
                spells.forEach(spell => {
                    const spellElement = document.createElement("div");
                    spellElement.innerHTML = `
                <div>
                    <p><strong>${spell.name}${spell.acquired ? ' (acquired)' : ''}</strong></p>
                    <p>${spell.description}</p>
                    <button onclick="buySpell('${spell.name}')" ${spell.acquired ? 'disabled' : ''}>
                        ${spell.acquired ? 'Acquired' : `Buy for ${spell.price} Gold`}
                    </button>
                </div>
            `;
                    magicStoreList.appendChild(spellElement);
                });

                logAction("You are viewing the Magic Store.");
            }

            // Function to handle buying spells
            function buySpell(spellName) {
                const spell = spells.find(s => s.name === spellName);
                if (spell && character.gold >= spell.price && !spell.acquired) {
                    character.gold -= spell.price;
                    spell.acquired = true;
                    character.skills.spells.push({ name: spell.name, description: spell.description });

                    updateLateralMenu();
                    showMagicStore();
                    logAction(`You purchased the ${spell.name} spell.`);
                } else {
                    logAction("You don't have enough gold or the spell is already acquired.");
                }
            }

            // Function to show acquired spells
            function showSpells() {
                const contentArea = document.getElementById("content-area");
                contentArea.innerHTML = `
            <h2>Spells</h2>
            <ul>
                ${character.skills.spells.map(spell => `<li>${spell.name} - ${spell.description}</li>`).join('')}
            </ul>
        `;

                logAction("You are viewing your acquired spells.");
            }

            // Initialize the game
            logAction("Welcome to Tibia Inspired Idle Adventure! Use the menu to navigate through different game areas.");
            updateLateralMenu();

            // Add touch event listeners for mobile devices
            document.addEventListener('DOMContentLoaded', (event) => {
                document.querySelectorAll('button').forEach(button => {
                    button.addEventListener('touchstart', function (e) {
                        e.preventDefault();
                        this.click();
                    });
                });
            });

            // SVG definitions for item images and menu icons
            const svgDefinitions = `
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="health_potion" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="#ff6b6b"/>
        <path d="M50 20v60M20 50h60" stroke="#ffffff" stroke-width="10"/>
      </symbol>
      <symbol id="mana_potion" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="#4ecdc4"/>
        <path d="M30 50c0-11 20-30 20-30s20 19 20 30c0 11-9 20-20 20s-20-9-20-20z" fill="#ffffff"/>
      </symbol>
      <symbol id="sword" viewBox="0 0 100 100">
        <path d="M20 80l60-60M50 20l30 30M50 80l30-30" stroke="#silver" stroke-width="10" stroke-linecap="round"/>
        <circle cx="80" cy="20" r="15" fill="#gold"/>
      </symbol>
      <symbol id="shield" viewBox="0 0 100 100">
        <path d="M50 10l40 20v30c0 20-40 40-40 40S10 80 10 60V30z" fill="#8A4B38"/>
        <path d="M50 20l30 15v20c0 15-30 30-30 30S20 70 20 55V35z" fill="#A67C52"/>
      </symbol>
      <symbol id="axe" viewBox="0 0 100 100">
          <path d="M20 80l60-60M50 20l30 30" stroke="#silver" stroke-width="10" stroke-linecap="round"/>
          <rect x="70" y="10" width="20" height="40" fill="#8B4513"/>
      </symbol>
      <symbol id="armor" viewBox="0 0 100 100">
          <path d="M50 10v60H30V70H70V10z" fill="#silver"/>
          <path d="M30 70H10V80h20v-10zM70 70h20V80H70v-10z" fill="#cccccc"/>
      </symbol>
      <symbol id="boots" viewBox="0 0 100 100">
          <path d="M20 50c0 30 60 30 60 0v30H20z" fill="#8B4513"/>
          <path d="M30 70h40" stroke="#black" stroke-width="5"/>
      </symbol>
      <symbol id="legs" viewBox="0 0 100 100">
          <path d="M30 10v80h10V10zM60 10v80h10V10z" fill="#8B4513"/>
      </symbol>
      <symbol id="rat" viewBox="0 0 100 100">
        <ellipse cx="50" cy="60" rx="40" ry="30" fill="#888"/>
        <circle cx="70" cy="45" r="5" fill="#000"/>
        <path d="M90 60q-10 10-20 0" stroke="#000" fill="none"/>
      </symbol>
      <symbol id="goblin" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="40" fill="#0f0"/>
        <circle cx="40" cy="40" r="5" fill="#000"/>
        <circle cx="60" cy="40" r="5" fill="#000"/>
        <path d="M40 70q10 10 20 0" stroke="#000" fill="none"/>
      </symbol>
      <symbol id="orc" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="#8b4513"/>
        <circle cx="35" cy="40" r="5" fill="#000"/>
        <circle cx="65" cy="40" r="5" fill="#000"/>
        <path d="M30 60q20 20 40 0" stroke="#000" fill="none"/>
      </symbol>
      <symbol id="dragon" viewBox="0 0 100 100">
        <path d="M10 90q40-80 80 0" fill="#f00"/>
        <circle cx="30" cy="30" r="5" fill="#ff0"/>
        <circle cx="70" cy="30" r="5" fill="#ff0"/>
        <path d="M20 70q30 20 60 0" stroke="#ff0" fill="none"/>
      </symbol>
      <symbol id="backpack" viewBox="0 0 24 24">
        <path d="M20 8h-3V6c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v10c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-11-2h6v2H9V6zm11 14H4V10h16v10z"/>
      </symbol>
      <symbol id="person" viewBox="0 0 24 24">
        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
      </symbol>
      <symbol id="sword-shield" viewBox="0 0 24 24">
        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
      </symbol>
      <symbol id="scroll" viewBox="0 0 24 24">
        <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
      </symbol>
      <symbol id="shop" viewBox="0 0 24 24">
        <path d="M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.9 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z"/>
      </symbol>
      <symbol id="tavern" viewBox="0 0 24 24">
        <path d="M2 22h20v-2H2v2zm18-6h-2v-4h2v4zm-4 0H8v-4h8v4zm-10 0H4v-4h2v4zm14-6H4V3h16v7z"/>
      </symbol>
      <symbol id="great_axe" viewBox="0 0 100 100">
        <path d="M20 80l60-60M50 20l30 30" stroke="#silver" stroke-width="10" stroke-linecap="round"/>
        <rect x="70" y="10" width="25" height="50" fill="#8B4513"/>
      </symbol>
      <symbol id="helmet" viewBox="0 0 100 100">
        <path d="M20 50c0-30 60-30 60 0v20H20z" fill="#silver"/>
        <path d="M30 60H10V80h20v-10zM70 60h20V80H70v-10z" fill="#cccccc"/>
      </symbol>
      <symbol id="staff" viewBox="0 0 100 100">
        <path d="M50 90V10M45 10h10M45 90h10" stroke="#8B4513" stroke-width="10" stroke-linecap="round"/>
        <circle cx="50" cy="10" r="5" fill="gold"/>
      </symbol>
      <symbol id="tunic" viewBox="0 0 100 100">
        <path d="M50 10v60H30V70H70V10z" fill="#ffcc00"/>
        <path d="M30 70H10V80h20v-10zM70 70h20V80H70v-10z" fill="#cccccc"/>
      </symbol>
      <symbol id="hat" viewBox="0 0 100 100">
        <path d="M20 30h60v10H20zM30 20h40v10H30z" fill="#ffffff"/>
        <path d="M10 40h80v10H10z" fill="#cccccc"/>
      </symbol>
      <symbol id="bow" viewBox="0 0 100 100">
        <path d="M50 100C20 100 0 50 0 50s20-50 50-50" stroke="tan" stroke-width="10" fill="none"/>
        <path d="M0 50L50 0M100 50L50 100" stroke="tan" stroke-width="10" fill="none"/>
      </symbol>
      <symbol id="book" viewBox="0 0 24 24">
        <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
      </symbol>
      <symbol id="skills" viewBox="0 0 24 24">
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
      </symbol>
      <symbol id="magic-wand" viewBox="0 0 24 24">
        <path d="M7 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-3 5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12-3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-3 5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-9 3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm3 5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12-3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-3 5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-5-14l12 12-2 2-12-12 2-2z"/>
      </symbol>
    </svg>
    `;

            // Insert SVG definitions into the document
            document.body.insertAdjacentHTML('afterbegin', svgDefinitions);

            // Update image sources to use SVG symbols
            character.inventory.forEach(item => {
                item.image = `#${item.image.replace('.svg', '')}`;
            });
            marketItems.forEach(item => {
                item.image = `#${item.image.replace('.svg', '')}`;
            });

            // Add touch event listeners for mobile devices
            document.addEventListener('DOMContentLoaded', (event) => {
                document.querySelectorAll('button').forEach(button => {
                    button.addEventListener('touchstart', function (e) {
                        e.preventDefault();
                        this.click();
                    });
                });
            });

            // Toggle lateral menu visibility
            function toggleMenu() {
                const lateralMenu = document.getElementById('lateral-menu');
                const toggleButton = document.getElementById('toggle-menu');
                lateralMenu.classList.toggle('collapsed');
                toggleButton.innerHTML = lateralMenu.classList.contains('collapsed') ? '<strong>&lt;</strong>' : '<strong>&gt;</strong>';
            }

            // Set initial state for lateral menu toggle button
            document.getElementById('toggle-menu').innerHTML = '<strong>&gt;</strong>';
            document.getElementById('toggle-menu').addEventListener('click', toggleMenu);
        </script>
    </div>
</body>

</html>